#+Title: Bachelorarbeit
#+Author: Nikolai Weidt
#+OPTIONS: toc:2 tasks:t title:nil todo:nil
#+OPTIONS: d:nil
#+Todo: TODO(t) | DONE(d) 
#+EXCLUDE_TAGS: ignore
#+LANGUAGE: de

* Fragen                                                             :ignore:
** TODO Zitieren von Bildern aus Buch?

** TODO Induktivität gemessen in Elektrowerkstatt?
* TODO [3/4] Noch zu tun:                                            :ignore:
** TODO DPI
** DONE minted
   CLOSED: [2019-10-09 Mi 09:54] SCHEDULED: <2019-09-20 Fr>
** TODO Simulierte Trajektorien durch step_evaluate laufen lassen
   SCHEDULED: <2019-09-19 Do>
** DONE EB-Bild und Beschreibung
CLOSED: [2019-10-09 Mi 09:54]
Bildunterschrift allgemein halten, genauer dann im text
** DONE Transportkonzept
   CLOSED: [2019-10-01 Di 14:35]
Bildunterschirft allgemein halten, genauer dann im text
** TODO Fit Stromstärke mit Formel
** TODO Fit Magnetfeld mit Formel
* Header                                                             :ignore:
   #+latex_class:scrbook
   #+latex_class_options:[page,pdftex,12pt,a4paper,twoside,openright]
   
   # #+latex_header: \usepackage[latin1]{inputenc}
   #+latex_header: \usepackage[T1]{fontenc}
   #+latex_header: \usepackage[ngerman]{babel} 
   #+latex_header: \usepackage[bottom=2.5cm,left=2.5cm,right=2cm]{geometry}
   #+latex_header: \usepackage{color, xcolor}
   #+latex_header: \usepackage{float}
   #+latex_header: \usepackage{blindtext}
   #+latex_header: \usepackage{booktabs}
   #+latex_header: \usepackage{subcaption}
   # #+latex_header: \usepackage[hidelinks]{hyperref}
   #+latex_header: \usepackage[onehalfspacing]{setspace}
   #+latex_header: \usepackage{graphicx}
   #+latex_header: \usepackage{amsmath,amssymb,amstext,bbm}
   #+latex_header: \usepackage[labelfont=bf, textfont=small, figurename=Abb., tablename=Tab.]{caption}
   #+latex_header: \usepackage[output-decimal-marker={,}]{siunitx}
   #+latex_header: \usepackage{csquotes}
   # #+latex_header: \usepackage[cache=false]{minted}
   #+latex_header: \setminted{fontsize=\footnotesize}
   #+latex_header: \usemintedstyle{emacs}
   #+latex_header: \usepackage[version=4]{mhchem}
   #+latex_header: \newgeometry{bottom=2.5cm,left=2.5cm,right=2.5cm}
   #+latex_header: \usepackage[style=alphabetic,maxbibnames=5,maxcitenames=5,backend=biber,language=german]{biblatex}
   #+latex_header: \addbibresource{library.bib}
     
* Andere Arbeiten                                                    :ignore:

** [[file:arbeiten/BAChJa.pdf][BAChJa]]
** [[file:arbeiten/Bachelorarbeit_MeRe.pdf][BAMeRe]]
** [[file:arbeiten/Meike%20Reginka%20-%20Masterarbeit%2015.06.18.pdf][MAMeRe]]
** [[file:arbeiten/Holzinger_2015_Diss%20Transport%20magnetischer%20Partikel%20durch%20ma%C3%9Fgeschneider....pdf][DissDeHo]]

* PDF:                                                               :ignore:
 [[file:ba.pdf][ba.pdf]] 
\include{titlepage/titlepage}
* TODO Einleitung label:sec-einleitung
Durch die allgemeine Zunahme der Weltbevölkerung, den demographischen Wandel und die steigende Lebenserwartung wird eine Zunahme von Krankheiten wie Krebs oder Diabetes erwartet cite:bray_global_2018,zhou_worldwide_2016. Um dieser Entwicklung entgegen zu wirken, werden kostengünstige, patientennahe Diagnoseprozesse für die Individualmedizin entwickelt. So können bereits früh Krankheitsanzeichen und -ursachen entdeckt und bekämpft werden.

Neuartigen Analysesystemen wie /Lab-on-a-Chip/ (LOC) werden deswegen großes Potential für Biomedizin und Medizindiagnostik in der Zukunft zugesprochen. Durch Miniaturisierung der Chips stellen sich viele Vorteile heraus cite:stone_microfluidics_2001,knight_honey_2002.
Möglich sind unter anderem Biochips zur Analyse und Detektion von bestimmten Molekülen cite:papadea_evaluation_2002, Zellen (beispielsweise T-Zellen für die HIV/AIDS Diagnostik cite:cheng_microchip_2007), Protein- und Molekülmarkern cite:wang_self-powered_2010, sowie DNA/RNA-Analysen (z.B. Identifizierung von resistenten Pathogenen cite:boehme_rapid_2010). Es können bereits geringe Probenvolumina innerhalb kürzester Zeit analysiert werden und es werden nur geringe Mengen von Reagenzien benötigt cite:chin_commercialization_2012. So können relativ kostengünstige Biochips und Analyseverfahren entwickelt werden, um zum Beispiel auch in Schwellen- und Entwicklungsländern die medizinische Versorgung zu verbessern. Ein wichtiger Bestandteil dieser LOCs ist Transport und Separation der Analyte innerhalb des Chips. Hier hat sich die Nutzung von magnetischen Partikeln bewährt. Verschiedene mikromagnetische Oberflächenstrukturierungen machen dabei den gezielten Transport der Partikel möglich cite:rampini_micromagnet_2016.  

Das in der Arbeitsgruppe \textsc{Ehresmann} etablierte Transportkonzept von superparamagnetischen Partikeln (SPP) oberhalb magnetisch strukturierter /Exchange-Bias/ (EB) Dünnschichtsysteme kann hierbei ein wichtiger Bestandteil zukünftiger Analysesysteme werden. Die Grundidee ist es durch ein extern angelegtes Magnetfeld die magnetische Feldlandschaft (MFL) so zu transformieren, dass ein gerichteter Transport der SPP zwischen /head-to-head/ und /tail-to-tail/-Domänenwänden möglich wird. Dabei können diese SPP in verschiedenen Prozessschritten eines LOCs verwendet werden. Einerseits können Analyte die an Partikel gebunden sind in bestimmte Analysebereiche transportiert werden cite:ehresmann_asymmetric_2011, andererseits können aber auch Strömungsfelder durch den Partikeltransport erzeugt werden, welche das Analyt durchmischen und so höhere biochemische Reaktionsraten bewirken cite:holzinger_controlled_2012. Ein weiteres Anwendungsgebiet ist die magnetophoretische Auftrennung der Partikel, um so verschiedene Partikelgrößen und -typen aufgrund unterschiedlicher Bewegungsgeschwindigkeiten voneinander trennen zu können, damit möglichst homogene Partikeldispersionen für Analysen erreicht werden können cite:zhou_magnetic_2016. Für jede dieser Anwendungen werden verschiedene Formen eines externen Magnetfeldes benötigt. Bisher wurden für den Partikeltransport trapezförmige Magnetfeldsequenzen mit konstanten Änderungsraten verwendet. In dieser Arbeit soll der Einfluss der Änderungsrate auf die Transportgeschwindigkeit und Trajektorie der Partikel genauer betrachtet werden, um Optimierungen bezüglich des Partikeltransports für das jeweilige Anwendungsgebiet möglich zu machen.
* TODO [1/5] Theoretische Grundlagen label:sec-grundlagen
  In diesem Kapitel soll das theoretische Hintergrundwissen, welches zum Verständnis dieser Arbeit benötigt wird, vermittelt werden. Dazu wird zunächst der Elektromagnetismus eingeführt. Anschließend wird die Verbindung zum Magnetismus in Materie hergestellt. Dann werden die in dieser Arbeit verwendeten /Exchange Bias Systeme/ eingeführt und im nächsten Teil wird schließlich der Transport von superparamagnetischen Partikeln über eben jene /Exchange Bias Systeme/ beschrieben, wobei die auf sie wirkenden Kräfte genauer betrachtet werden sollen.

** TODO Elektromagnetismus label:sec-elektromagnetismus
   Allgemein gilt, dass bewegte Ladungsträger (Ströme) ein Magnetfeld erzeugen. Fließt zum Beispiel ein Strom $I$ durch einen langen geraden Draht, erzeugt dies ein kreisförmiges Magnetfeld. Entlang der Stromrichtung ergibt sich eine Rechtsschraube für das Magnetfeld B. Eine Spule besteht aus mehreren Windungen stromdurchflossenen Drahtes und erzeugt so durch Überlagerung ein Magnetfeld ähnlich eines Stabmagneten mit Nord- und Südpol. Die Magnetische Flussdichte $B$ im Vakuum hängt dabei von Stromstärke $I$ und Windungsdichte $n = \frac{N}{L}$ (Windungen pro Länge) ab. Hierbei ist $\mu_\mathrm{0}$ die magnetische Feldkonstante cite:demtroder_experimentalphysik_2017:

#+name: eq-spule
\begin{equation}
B = \mu_{\mathrm{0}} \cdot n \cdot I .
\end{equation}

*** TODO Helmholtzspulen
Für den Partikeltransport wird ein äußeres magnetisches Feld mit Hilfe von Helmholtzspulen erzeugt. Eine Helmholtzspule besteht aus zwei parallelen Ringspulen in Reihe. Diese erzeugen ein homogenes Magnetfeld in ihrem Inneren, wenn die Helmholtz-Bedingung erfüllt ist, d.h. Radius und Abstand der Teilspulen gleich sind. Dieses Magnetfeld hängt in Näherung von der Stromstärke $I$, der Windungszahl $N$ und dem Radius einer einzelnen Spule $r$ ab cite:reginka_charakterisierung_2015:
    
#+name: eq-helmholtz
\begin{equation}
B = \left(\frac{4}{5}\right)^{\frac{3}{2}} \cdot \mu_{\mathrm{0}} \cdot \frac{N \cdot I}{r} .
\end{equation}

** TODO Spulen als elektrische Bauteile label:sec-spulen
Beim Anlegen einer Spannung an eine Spule, wird innerhalb dieser eine Gegenspannung induziert. Hierbei ist die induzierte Spannung
    
 #+name: eq-induktivitaet
 \begin{equation}
 U_\mathrm{ind} = - L \frac{dI}{dt} .
 \end{equation}

abhängig von der zeitlichen Änderung der Stromstärke $I$, und dem Selbstinduktionskoeffizienten, kurz Induktivität $L$. Die Selbstinduktion kann dabei wie folgt erklärt werden: Bei Anlegen einer Spannung an eine Spule fließt ein Strom. Aus diesem Strom resultiert ein Magnetfeld. Nach dem Faradayschen Induktionsgesetz entsteht in einer Spule bei Änderung des Magnetfeldes eine Induktionsspannung. Diese ist nach Lenzscher Regel der Ursache, also der angelegten Spannung, entgegen gerichtet cite:demtroder_experimentalphysik_2017.
 
Als Folge der Selbstinduktion wird in einem Stromkreis mit Induktiviät $L$ und Widerstand $R$ in Reihe beim Einschalten der Spannungsquelle der Anstieg der Stromstärke verzögert. Eine reale Spule besitzt immer auch einen eigenen ohmschen Widerstand. Die angelegte Spannung teilt sich auf in $U_R$ über dem Widerstand und der Spannung $U_L$, die nötig ist, um der Selbstinduktion entgegen zu wirken. Dabei ist $U_{\mathrm{L}} = - U_{\mathrm{ind}}$. Für den zeitlichen Verlauf der Stromstärke $I(t)$ ergibt sich hierbei folgender exponentieller Zusammenhang mit der Zeitkonstanten $\tau = \frac{L}{R}$ cite:raith_elektromagnetismus_2006:

 #+name: eq-strom-spule
 \begin{equation}
 I(t) = I_{\mathrm{0}} \cdot (1 - e^{ -\frac{t}{\tau}})= I_{\mathrm{0}} \cdot (1- e^{ -\frac{t \cdot R}{L}}).
 \end{equation}

Der entsprechende Verlauf von Spannung und Stromstärke kann in Abbildung ref:fig-einschalten nachvollzogen werden.


Analog hierzu fällt die Stromstärke beim Abschalten nicht direkt auf Null sondern folgt auch hier wegen einer induzierten Gegenspannung einem exponentiellen Abfall mit der Zeitkonstanten $\tau$ cite:raith_elektromagnetismus_2006:

#+name: eq-auschalten
\begin{equation}
I(t) = I_{\mathrm{0}} \cdot e^{ -\frac{t}{\tau}}= I_{\mathrm{0}} \cdot e^{ -\frac{t \cdot R}{L}}.
\end{equation}

Der Abschaltvorgang ist in Abbildung ref:fig-abschalten abgebildet.

:CODE:
#+begin_src python :session einaus :results output :exports none
  import numpy as np
  import matplotlib
  matplotlib.use("Agg")
  import matplotlib.pyplot as plt
  from scipy.signal import square
  import os

  figsize = (5,5)

  def I(x,L):
      return U0 * (1 - np.exp(-x / L))

  def I_aus(x,L):
      return U0 * (np.exp(-x / L))

  L = 1 
  x = np.linspace(-0.5,3,10000) 
  U0 = square(x) * 2.5
  U0 += 2.5
  U0[0] = 0
  I = I(x,L)
  Uind = L * U0 * (x/L) * np.exp(-x/L)
  plt.clf()
  fig, axes = plt.subplots(2,1, figsize=figsize)
  axes[0].plot(x, U0, label="U0")
  axes[0].set_ylabel("U [V]")
  axes[0].set_xlabel("t")
  axes[0].tick_params(axis="x", labelbottom=False)
  axes[1].tick_params(axis="x", labelbottom=False)
  axes[0].tick_params(axis="y", labelleft=False)
  axes[1].tick_params(axis="y", labelleft=False)
  axes[0].legend()
  axes[1].plot(x, I, label="I")
  axes[1].set_ylabel("I [A]")
  axes[1].set_xlabel("t")
  axes[1].legend()

  plt.tight_layout()
  plt.savefig("./img/einschalten.png", dpi=600)

  U1 = square(x * -1)
  I2 = I_aus(x,L)
  fig,axes = plt.subplots(2,1, figsize=figsize)
  axes[0].plot(x, U1, label="U0")
  axes[0].set_ylabel("U [V]")
  axes[0].set_xlabel("t")
  axes[0].tick_params(axis="x", labelbottom=False)
  axes[1].tick_params(axis="x", labelbottom=False)
  axes[0].tick_params(axis="y", labelleft=False)
  axes[1].tick_params(axis="y", labelleft=False)
  axes[0].legend()
  axes[1].plot(x, I2, label="I")
  axes[1].set_ylabel("I [A]")
  axes[1].set_xlabel("t")
  axes[1].legend()
  plt.tight_layout()
  plt.savefig("./img/ausschalten.png", dpi=600)
  "ausschalten.png"
#+end_src

#+RESULTS:

:END:

\begin{figure}
\centering
\begin{subfigure}[b]{0.4\textwidth}
\centering
\includegraphics[width=\textwidth]{./img/schaltbild.png}
\caption{Schaltbild.}
\label{fig-schaltbild}
\end{subfigure}
\newline
\begin{subfigure}[b]{0.49\textwidth}
\centering
\includegraphics[width=\textwidth]{./img/einschalten.png}
\caption{Einschaltvorgang.}
\label{fig-einschalten}
\end{subfigure}
\begin{subfigure}[b]{0.49\textwidth}
\centering
\includegraphics[width=\textwidth]{./img/ausschalten.png}
\caption{Abschaltvorgang.}
\label{fig-abschalten}
\end{subfigure}
\caption{Schematische Darstellung der Stromstärke und Spannung bei Ein- und Abschaltvorgang in einem Stromkreis mit Widerstand $R$, Induktion $L$ und einer Diode um einen Weg für den Abschaltinduktionsstrom zu liefern.}
\end{figure}

** DONE [4/4] Magnetismus in Materie label:sec-magnetismus
   CLOSED: [2019-09-30 Mo 11:12]
Wie bereits in Kapitel ref:sec-elektromagnetismus erläutert, erzeugen bewegte Ladungen Magnetfelder. Eine solche bewegte Ladung ist auch das Elektron, das in einer vereinfachten Vorstellung um den Atomkern kreist. Folglich besitzen Atome ein magnetisches Moment $\mu$, welches abhängig ist von der umkreisten Fläche $A$ und dem Kreisstrom des Elektrons $I$ cite:kassing_bergmann_2005:
   
#+name:eq-moment:
\begin{equation}
\mu = I \cdot A
\end{equation}

Da Elektronen sowohl eine Bahnbewegung als auch eine Spinbewegung durchführen, existieren auch zwei magnetische Momente, jeweils abhängig von $l$ und $s$ den Quantenzahlen des Bahn- und Spindrehimpulses, $g_\mathrm{e}$ dem gyromagnetischen Verhältnis des Elektrons, $m_\mathrm{e}$ der Masse des Elektrons und $e$ der Elementarladung cite:kassing_bergmann_2005:
\\
Die Vektorsumme aus Spinmoment $\mu_\mathrm{s}$
#+name:eq-spinmoment
\begin{equation}
 \mu_\mathrm{s} = - g_\mathrm{e} \frac{\vert e \vert}{2 m_\mathrm{e}} \cdot s
\end{equation}


und Bahnmoment $\mu_\mathrm{l}$ 
#+name:eq-bahnmoment
\begin{equation}
 \mu_\mathrm{l} = - \frac{\vert e \vert}{2 m_\mathrm{e}} \cdot l
\end{equation}

ergibt sich zu dem magnetischen Gesamtmoment $\mu_j$:
#+name:eq-gesamtmoment
\begin{equation}
\mu_\mathrm{j} = \mu_\mathrm{l} + \mu_\mathrm{s}
\end{equation}

Wird Materie in eine äußere magnetische Erregung $H$ gebracht, resultiert meistens ein magnetisches Moment. Makroskopisch dient die Magnetisierung $\vec{M}$ zur Beschreibung der magnetischen Momente von Materie pro Volumeneinheit. Die Magnetisierung ist für isotrope und lineare Medien, in denen die magnetischen Momente nicht wechselwirken, proportional zum extern angelegen Magnetfeld $\vec{H}$, wobei die magnetische Suszeptibilität $\chi$ ein materialabhängiger, temperaturabhängiger dimensionsloser Proportionalitätsfaktor ist cite:kassing_bergmann_2005,nolting_grundkurs_2013:

#+name:eq-magnetisierung
\begin{equation}
\vec{M} = \chi \cdot \vec{H}
\end{equation}

Festkörper können in Folge der mikroskopischen Ursachen bezüglich ihres Magnetismus in drei Kategorien eingeordnet werden. Ein Material, in dem keine permanenten magnetischen Momente vorliegen, in dem aber in Anwesendheit eines äußeren Magnetfeldes magnetische Momente induziert werden, wird diamagnetisch genannt. Besitzt ein Material bereits ohne äußeres Magnetfeld permanente magnetische Momente, die nicht miteinander wechselwirken, so handelt es sich um einen Paramagneten. Wechselwirken die magnetischen Momente, kann dies zu einer spontanen Magnetisierung und unter anderem zu Ferro- oder Antiferromagnetismus führen cite:gross_festkorperphysik_2012.

Im Folgenden soll näher auf diese Klassifizierungen eingegangen werden.

*** DONE Dia- und Paramagnetismus label:sec-dia-und-para
    CLOSED: [2019-09-23 Mo 11:59]
Diamagnetismus ist ein magnetischer Effekt in jeglicher Materie, welcher durch induzierte magnetische Momente auftritt. In einem externen Magnetfeld wird im Atom ein magnetisches Moment induziert, welches dem induzierenden Magnetfeld entgegen wirkt (Lenzsche Regel). Ein Festkörper wird als diamagnetisch bezeichnet, wenn ohne äußeres magnetisches Feld keine magnetischen Momente vorliegen. Vor allem abgeschlossene äußere Elektronenschalen tragen zum diamagnetischen Effekt eines Atoms bei. Die Spin- und Bahnmomente der gepaarten Elektronen heben sich in Summe auf. Diamagnetische Materialien haben eine negative Suszeptibilität und werden aus dem externen Magnetfeld heraus gedrängt cite:gross_festkorperphysik_2012.

#+name:eq-dia
\begin{equation}
\chi_\mathrm{dia} < 0
\end{equation}

# Paramagnetismus:
# ------
Ein paramagnetischer Festkörper besitzt bereits ohne äußeres Magnetfeld magnetische Momente. Jedoch ist die Richtung der magnetischen Momente durch die thermische Energie in alle Raumrichtungen verteilt, und die magnetischen Momente wechselwirken untereinander nicht. In Summe ist makroskopisch keine Magnetisierung erkennbar cite:demtroder_experimentalphysik_2017:

#+name:eq-m-para
\begin{equation}
M = \frac{1}{V} \sum \mu_\mathrm{j} = 0.
\end{equation}

Legt man ein äußeres Magnetfeld an, richten sich die magnetischen Momente nach diesem aus, und ein paramagnetischer Festkörper wird in das Magnetfeld gezogen. Es existiert auch Diamagnetismus in einem paramagnetischen Festkörper, jedoch ist dieser schwächer und der Paramagnetismus dominiert. Ein paramagnetischer Festkörper besitzt eine positive Suszeptibilität cite:gross_festkorperphysik_2012:
 
#+name:eq-susz-para
\begin{equation}
\chi_\mathrm{para} > 0
\end{equation}

*** DONE Ferromagnetismus label:sec-ferro
    CLOSED: [2019-09-24 Di 16:42]
    
Beeinflussen sich die einzelnen magnetischen Momente gegenseitig, sind sie also gekoppelt, kann das System einen magnetisch geordneten Zustand einnehmen. Dieser geordnete Zustand unterliegt jedoch einer Temperaturabhängigkeit. Eine Ursache für das Vorliegen von kollektivem Magnetismus ist die quantenmechanische *Austausch-Wechselwirkung* cite:kassing_bergmann_2005.

Die Suszeptibilität ferromagnetischer Materialien ist um bis zu mehrere Größenordnungen größer als bei paramagnetischen Materialien cite:demtroder_experimentalphysik_2017.

\begin{figure}[h]
\centering
\begin{subfigure}[b]{0.3\textwidth}
\caption{Ferromagnetischer Festkörper.}
\includegraphics[width=\textwidth]{./img/ferro.pdf}
\label{fig-ferro}
\end{subfigure}
\quad
\begin{subfigure}[b]{0.3\textwidth}
\caption{Antiferromagnetischer Festkörper.}
\includegraphics[width=\textwidth]{./img/antiferro.pdf}
\label{fig-antiferro}
\end{subfigure}
\caption{Schematische Darstellung der magnetischen Momente innerhalb eines Weissschen Bezirkes in Festkörpern.}
\end{figure}

Die magnetischen Dipole in einem ferromagnetischen Festkörper weisen innerhalb der so genannten *Weissschen Bezirke* (auch Domänen) eine spontane Magnetisierung auf, da die Austausch-Wechselwirkung zu einer parallelen Kopplung der magnetischen Momente führt (vgl. Abbildung ref:fig-ferro). Ohne externes Magnetfeld zeigen die magnetischen Momente verschiedener Weissscher Bezirke in verschiedene Richtungen. Durch die hohe Anzahl der Weissschen Bezirke ist makroskopisch keine Magnetisierung erkennbar cite:rybach_physik_2008. Der Übergang zwischen den Weissschen Bezirken wird als Domänenwand bezeichnet, welche als *Bloch-(Domänen)wände* bezeichnet werden. Bloch-Wände bestehen aus atomaren Dipolen die sich innerhalb bzw. parallel zur Wandebene drehen cite:gross_festkorperphysik_2012. Ein zweiter möglicher Domänentyp, in dem sich die magnetischen Momente um eine Achse innerhalb der Wandebene drehen, wird *Néel-Wand* genannt. Dieser Domänenwandtyp wird in dünnen Schichten gegenüber Bloch-Domänenwänden favorisiert, wenn die Schichtdicke im Bereich der Domänenwandbreite liegt, da Néel-Wände hier energetisch günstiger sind cite:hubert_magnetic_2008. In den in dieser Arbeit verwendeten Proben liegen aufgrund der dünnen ferromagnetischen Schichten Néel-Wände vor. 

#+caption: Hysteresekurve der Magnetisierung $M$ in Abhängigkeit vom äußeren Feld $B$. Aus cite:demtroder_experimentalphysik_2017.
#+name: fig-hysterese
#+attr_latex: :placement [h] :width 0.4\textwidth
[[file:img/hysterese.png]]

Die resultierende Magnetisierung ist abhängig von vorherigen erfolgten Magnetisierungsprozessen. Abbildung ref:fig-hysterese stellt eine Hysteresekurve dar, die für das Ummagnetisierungsverhalten eines ferromagnetischen Festkörper charakteristisch ist. Wird eine vollkommen entmagnetisierte ferromagnetische Probe in ein äußeres Magnetfeld gebracht, so steigt die Magnetisierung zunächst linear. Die Weissschen Bezirke, deren magnetisches Moment bereits annähernd in Richtung des Magnetfeldes zeigen, wachsen. Die Bloch-Wände verschieben sich, da sich die atomaren Dipole drehen. Da sich alle Weissschen Bezirke aufgrund von Größe und Lage energetisch unterscheiden, klappen dann nach und nach in anderen Weissschen Bezirken zunächst die magnetischen Momente um (*Barkhausen Sprünge)*, bevor sich auch hier die Domänenwände verschieben.
Die Magnetisierung erreicht schließlich ab einem Sättigungsfeld $B_\mathrm{S}$. In diesem Zustand zeigen alle mikroskopischen magnetischen Momente in die selbe Richtung parallel zum Feld. Zu sehen ist dies in der Teilkurve a in ref:fig-hysterese welche *jungfräuliche Kurve* oder *Neukurve* genannt wird.
Wird das externe Feld wieder zurück gefahren, folgt die Magnetisierung einer neuen Kurve b. Hierbei durchläuft die Kurve den Punkt $M_\mathrm{R}$ die Restmagnetisierung, auch *Remanenz* genannt, bei $B=0$. Die Bloch-Wände sind wieder in ihren ursprünglichen Positionen, jedoch bleiben innerhalb der Domänen die parallelen Ausrichtungen der magnetischen Momente erhalten.
Wird nun das Magnetfeld weiter bis $-B_\mathrm{S}$ verringert, ergibt sich erneut eine Sättigung, in der sich nun die magnetischen Momente in die andere Richtung ausgerichtet haben. Dabei durchläuft die Magnetisierungskurve die Feldstärke $B_\mathrm{K}$, welche *Koerzitivfeldstärke* genannt wird. Dies ist die Feldstärke, welche benötigt wird, um die Restmagnetisierung aufzuheben.
Ändert sich das externe Feld nun wieder in Richtung $+B_\mathrm{S}$, zeigt sich Teilkurve c, welche wiederum in Sättigung übergeht. Die Teilkurven b und c stellen hierbei die typische *Hysteresekurve* eines ferromagnetischen Festkörpers dar, und werden immer wieder bei erneuten Umpolungen des externen Magnetfeldes durchlaufen cite:rybach_physik_2008,demtroder_experimentalphysik_2017.

Beim Ausrichten der magnetischen Dipole in einem ferromagnetischen Stoff wird Energie benötigt. Diese entspricht der Fläche, die von der Hysteresekurve eingeschlossen ist und wird beim Ummagnetisieren in Wärme umgewandelt cite:rybach_physik_2008.

Der Festkörper kann seine ferromagnetischen Eigenschaften verlieren, wenn er über eine bestimmte, für das Material charakteristische, Temperatur $T_\mathrm{C}$, die *Curie-Temperatur* erhitzt wird. Die Wärmebewegung zerstört dann die magnetische Ausrichtung der Dipole und der Stoff zeigt nur noch paramagnetisches Verhalten cite:demtroder_experimentalphysik_2017.

*** DONE Antiferromagnetismus label:sec-antiferro
    CLOSED: [2019-09-23 Mo 12:00]
In einem Antiferromagneten liegen zwei ineinander gestellte Untergitter im Kristallgitter vor. Die magnetischen Momente jener Untergitter zeigen jeweils in entgegengesetzte Richtungen und haben den gleichen Betrag. Somit heben sie sich insgesamt auf und es ist keine makroskopische Magnetisierung sichtbar. Oberhalb der *Néel-Temperatur* $T_\mathrm{N}$, dem Analogon zur Curie-Temperatur, geht der Festkörper in den paramagnetischen Zustand über cite:demtroder_experimentalphysik_2017. 

*** DONE Superparamagnetismus
    CLOSED: [2019-09-24 Di 16:42]
Ist das Volumen eines ferromagnetischen Festkörpers so gering, dass er nur aus einer einzelnen Domäne besteht, spricht man von Superparamagnetismus. Die Suszeptibilität solcher Superparamagneten ist größer als die Suszeptibilität von Paramagneten, jedoch verhalten sie sich ohne äußeres Magnetfeld ähnlich, da die Magnetisierung in solchen einzelnen Domänen nicht thermisch stabil ist und sich beliebig ausrichten kann cite:gross_festkorperphysik_2012.
Jedoch ist die Zeitskala des Experiments, und ob in dieser thermische Aktivierungs- und Relaxationsprozesse statt finden können, wichtig, um Aussagen über das magnetische Verhalten eines Partikels machen zu können. Bei ausreichend großen Zeitskalen wird über die durch thermische Energie unterschiedlichen magnetischen Momente gemittelt und man erhält insgesamt keine Magnetisierung. Wird jedoch sehr kurz gemessen, kann eine Richtung der Magnetisierung für diesen kurzen Zeitausschnitt bestimmt werden cite:leslie-pelecky_magnetic_1996.
    
** TODO Exchange Bias Effekt label:sec-EB
Der /Exchange Bias/ (EB) Effekt  wurde 1956 von \textsc{Meiklejohn} und \textsc{Bean} an oxidierten \ce{Co}-Partikeln entdeckt. Diese Partikel bestehen im Kern aus Cobalt, einem Ferromagneten, und besitzen eine äußere dünne \ce{CoO}-Schicht, welche antiferromagnetisch ist. Die Autoren entdeckten eine Verschiebung der Hysteresekurve um das sogenannte Austauschverschiebungsfeld $H_\mathrm{EB}$ zwischen antiferro magnetischer und ferromagnetischer Schicht, wenn die Partikel in einem externen Magnetfeld unter die Néel-Temperatur der antiferromagnetischen Schicht gekühlt wurden cite:meiklejohn_new_1957.
Der Exchange Bias Effekt bewirkt eine unidirektionale Anisotropie in der ferromagnetischen Schicht, das heißt es wird nur eine Richtung für die Magnetisierung bevorzugt. Dies steht im Gegensatz zur sonst üblichen uniaxialen Anisotropie in Ferromagneten, welche parallele und antiparallele Ausrichtungen entlang der /leichten Achse/ der Magnetisierung favorisiert. Die Ursache für den Exchange Bias Effekt ist die quantenmechanische Austauschwechselwirkung zwischen antiferromagnetischen und ferromagnetischen magnetischen Momenten an der Grenzfläche zwischen den Schichten cite:stohr_magnetism_2006. 

Die Hysteresekurve eines eines EB-Systems (Abbildung ref:fig-eb links in magenta) ist um das Austauschwechselfeld $H_\mathrm{EB}$ verschoben im Vergleich zum alleinigen Ferromagneten (grau gestrichelt). Während des Feldkühlprozesses wird der Antiferromagnet auf eine Temperatur zwischen Néel-Temperatur und Curie-Temperatur gebracht, hier verhält er sich paramagnetisch (Abb. ref:fig-eb rechts oben). Anschließend wird die Temperatur unter die Néel-Temperatur verringert. Die magnetischen Momente im AF koppeln an der Grenzfläche über $J_\mathrm{AF/F}$ an die Sättigungsmagnetisierung des Ferromagneten (Abb. ref:fig-eb rechts unten). So wird eine magnetische Ordnung hergestellt, welche die unidirektionale Anisotropie im Ferromagneten bewirkt cite:merkel_einfluss_2018.

#+name:fig-eb
#+caption: Schematische Darstellung der ferromagnetischen Hysteresekurve eines EB-Systems in Abhängigkeit des externen Magnetfeldes parallel zur leichten Achse der unidirektionalen Anisotropie (links) und schematische Darstellung des Feldkühlprozesses zur Herstellung des EB-Effektes (rechts) cite:merkel_einfluss_2018.
#+attr_latex: :width \textwidth :placement [!h]
#+attr_org: :width 50px
[[file:img/eb.png]]

Durch Helium-Ionenbeschuss kann der EB-Effekt eines Substrates verändert werden. So kann zum Beispiel die Richtung des Austauschwechselfeldes lokal umgekehrt werden cite:mougin_local_2001. Dies ermöglicht magnetische Strukturierung von EB-Systemen, zum Beispiel in einer /in-plane/ Anisotropie, welche zu /head-to-head/ und /tail-to-tail/-Domänenwänden führt, womit wiederum Transport von superparamagnetischen Partikeln realisiert werden kann cite:holzinger_directed_2015. 

** TODO Partikeltransport label:sec-partikeltransport
Superparamagnetische Partikel (SPP) lassen sich durch Verwendung von den zuvor beschriebenen EB-Systemen (im Vergleich zum Transport über nichtmagnetischen Substraten) in kontrollierten Abständen zum Substrat und in geordneter Reihenform transportieren. Außerdem wird durch die magnetische Abstoßung zwischen den Partikeln eine Agglomeration erschwert und die Partikelgeschwindigkeiten können durch Modifikationen am EB-System oder externen Magnetfeld beeinflusst werden cite:holzinger_directed_2015.

Werden SPP in wässriger Lösung ohne externes Magnetfeld auf das EB-Substrat gegeben, so positionieren sie sich in Reihen über den Domänenwänden. Dabei befinden sie sich in einem Gleichgewichtsabstand über dem Substrat an den x-Positionen, in denen die potentielle Energielandschaft Minima besitzt. Diese Minima sind ohne externes Magnetfeld über sowohl /head-to-head/ (hh) als auch /tail-to-tail/ (tt) Domänenwänden vorhanden (vgl. Abbildung ref:fig-mfl) cite:holzinger_directed_2015.

#+name:fig-mfl
#+caption: Schematische Darstellung der potentiellen Energielandschaft $U_\mathrm{SPP,z(x,y)}$ superparamagnetischer Partikel über einer EB-Streifendomänenstruktur. Das magnetische Moment der Partikel ist parallel zur Magnetfeldlandschaft ausgerichtet und die Partikel befinden sich in Reihen über den /head-to-head/ (hh) und /tail-to-tail/ (tt) Domänenwänden. Aus cite:holzinger_transport_2015.
#+attr_latex: :width \textwidth :placement [h]
#+attr_org: :width 100px
[[file:img/mfl.png]]

Der Transport von superparamagnetischen Partikeln über Exchange-Bias-Systeme erfolgt durch zeitliche Veränderungen der magnetischen Potentiallandschaft über der Probe. Dabei setzt sich das effektive Magnetfeld, das die Partikel erfahren, aus der Magnetfeldlandschaft des Exchange-Bias Systems und dem externen Magnetfeld zusammen cite:holzinger_directed_2015:
 
\begin{equation}
\vec{H}_\mathrm{eff} = \vec{H}_\mathrm{MFL} + \vec{H}_\mathrm{ext}.
\end{equation}

Die Partikel positionieren sich in Abwesenheit eines externen Feldes in Reihen über alle Domänenwände verteilt (vgl. Abbildung ref:fig-mfl). Der genaue Transportvorgang kann in Abbildung ref:fig-transport nachverfolgt werden. Durch Einschalten des Magnetfeldes $H_\mathrm{z}$ wird die Magnetfeldlandschaft über den Domänenwänden verändert. hh-Domänenwände werden energetisch begünstigt und die Partikel bewegen sich ungeleitet in Richtung dieser (a). So bilden sich Reihen aus SPP, welche jeweils die doppelte Domänenbreite voneinander entfernt sind. Der Vorzeichenwechsel von $H_\mathrm{x,max}$ bewirkt eine Verschiebung der Magnetfeldlandschaft in x-Richtung, welche das magnetische Moment der SPP leicht in Richtung nächster Domänenwand kippt (b), so dass nach erneuter Umpolung von $H_\mathrm{z,max}$ das magnetische Moment in die entgegengesetzte Richtung drehen kann, und das Partikel eine Vorzugsrichtung hat, in die es sich bewegt. Andererseits würden die Partikel zufällig in eins der beiden benachbarten Energieminima wandern. Die Minima der Energielandschaft verschieben sich auf die nächstgelegene Domänenwand, da nun statt hh-Domänenwänden die tt-Domänenwände energetisch günstiger sind (c). Anschließend wird der Prozess mit umgekehrten Vorzeichen durchgeführt (d) und die Partikel befinden sich dann erneut über einer hh-Domänenwand (e) cite:holzinger_directed_2015. 

#+name:fig-transport
#+caption: (a-e): Berechnete magnetische Potentiallandschaft $U_\mathrm{SPP,z(x)}$ als Funktion der x-Position im Partikelzentrum $\SI{2}{\mu\meter}$ über dem EB-System. Die superparamagnetischen Partikel sind schematisch in braun dargestellt. (f): Angelegte Magnetfeldsequenzen. Die Zeitskala der Magnetfeldsequenzen ist passend zu den Potentiallandschaften aufgetragen. Aus cite:holzinger_transport_2015.
#+attr_latex: :width \textwidth :placement [h]
#+attr_org: :width 100px
[[file:img/trapez.png]]

* TODO Experimentelle Methoden label:sec-methoden

** TODO Experimenteller Aufbau label:sec-aufbau

Um den Transport von superparamagnetischen Partikeln über das Substrat zu realisieren und zu beobachten, wurde der Versuchsaufbau, der in Abbildung ref:img-aufbau zu sehen ist, verwendet.

#+caption: Partikeltransport Versuchsaufbau.
#+attr_latex: :width \textwidth
#+name: img-aufbau
file:./img/aufbau.png

Dieser Versuchsaufbau kann in zwei Teile unterteilt werden. Der erste Teil besteht aus einer Optronis Hochgeschwindigkeitskamera (1), welche durch ein Mikroskop (2) die Partikelbewegung in Videos aufzeichnet. Zur Belichtung der Probe wird eine Weißlicht-LED (3) verwendet. Die Position der Kamera über der Probe, und somit der Fokus des Mikroskops wird über einen Schrittmotor (4) verändert, welcher von einem LabView-Programm über eine NI USB-6002 Box (im Folgenden /DAQ/ für /Data Acquisition/) (5) gesteuert wird. Der zweite Teil erzeugt das elektromagnetische Feld, um die Partikel zu transportieren. Er besteht aus drei senkrecht zueinander stehenden Helmholtzspulen (6), in deren Mitte ein beweglicher Probentisch liegt. Hiermit können Magnetfelder für alle drei Raumdimensionen erzeugt werden. Die Helmholtzspulen werden über ein spannungsgesteuertes Netzteil (7) mit Strom versorgt, welches wiederum von einem NI USB-6002 Box (DAQ) (8) über ein Python-Programm (siehe Kapitel ref:sec-py) angesteuert wird. So können beliebige Magnetfeldsequenzen im Inneren der Helmholtzspulen realisiert werden. Die Helmholtzspulen bestehen aus gewickeltem Kupferdraht, nähere Daten können Tabelle ref:tab-spulen entnommen werden.

#+caption: Technische Daten Helmholtzspulen. Windungen, Radius, Widerstand und Länge wurden der technischen Zeichnung entnommen, die Induktivität wurde gemessen.
#+attr_latex: :center t :align nil
#+name: tab-spulen
| Name | Windungen | Radius\nbsp[\si{\meter}] | Widerstand\nbsp[\si{\ohm}] | Länge\nbsp[\si{\milli\meter}] | Induktivität\nbsp[\si{\milli\henry}] |
|------+-----------+----------------------+------------------------+---------------------------+----------------------------------|
| /    | <         | <                    | <                      | <                         | <                                |
| x    | \num{360} | \num{0,047}          | \num{18,2}             | \num{65}                  | \num{9,29}                       |
| y    | \num{936} | \num{0,069}          | \num{51,6}             | \num{95}                  | \num{57,9}                       |
| z    | \num{330} | \num{0,030}          | \num{11,5}             | \num{70}                  | \num{5,6}                        |


Bei den Versuchen in dieser Arbeit wurden nur zwei der drei Helmholtzspulen verwendet. Dabei handelte es sich um die Spulen für die x- und z-Richtung. Die Partikel wurden in einer mikrofluidischen Zelle auf den Proben platziert, um dann untersucht werden zu können. Hierfür wird Parafilm zuerst in Größe der Probe zurecht geschnitten, und dann ein Rechteck im Inneren des Parafilms ausgeschnitten. So entsteht eine Aussparung in der Mitte, in die circa \SI{10}{\micro\litre} Partikelsuspension gegeben werden. Anschließend wird die Probe auf dem Probentisch platziert, die LED eingeschaltet, und die Kamera mittels Livebild auf die Partikel fokussiert.

** TODO Programm zur Erstellung von Magnetfeldsequenzen label:sec-py
Um die in dieser Arbeit benötigten externen Magnetfelder zu erzeugen wurde ein neues Programm in Python entwickelt, mit dessen Hilfe verschiedene Wellenformen als Magnetfeld ausgegeben werden können. Hierbei stand ein modularer Ansatz im Vordergrund, weshalb durch einfache Änderungen am Programmcode andere Geräte im Aufbau verwendet werden können. So kann zum Beispiel ein anderes Netzteil verwendet werden, um dann auch drei Helmholtzspulen für Magnetfelder in drei Dimensionen anzusteuern. Ziel war es sowohl sinus- und rechteckförmige Magnetfelder, als auch die für diese Arbeit benötigten trapezförmigen Magnetfelder erzeugen zu können. Dabei ist es möglich jeden wichtigen Parameter der Wellenform zu ändern, und die Magnetfeldsequenzen als Plot dargestellt zu sehen. Abbildung ref:fig-prog zeigt einen Screenshot des Programms.

Momentan ist es nur möglich die Spannungsausgabe des DAQ-Gerätes zu modifizieren und anzuzeigen. In Zukunft soll es jedoch möglich sein bereits das entstehende Magnetfeld im Programm auszuwählen und angezeigt zu bekommen. Hierzu wurden zunächst die verwendeten Spulen und das Netzteil charakterisiert (siehe Kapitel ref:sec-stromundmagnet).

#+name:fig-prog
#+caption: Screenshot des entwickelen Programms zur Erstellung von beliebigen Magnetfeldsequenzen. Rechts dargestellt werden zwei trapezförmige Spannungen, die so von dem DAQ-Gerät an das Netzteil ausgegeben werden können.
#+attr_latex: :width \textwidth :placement [H]
[[file:img/prog.png]]

** TODO Zeitabhängige Messung von Strom und Magnetfeld label:sec-stromundmagnet
Um das Verhalten der im Experiment verwendeten Helmholtzspulen nachvollziehen zu können und um die gegebenen technischen Daten und Modelle zu Überprüfen, wurden Messungen des Magnetfeldes und des Stromes an eben jenen Spulen durchgeführt.

Hierfür wurde einerseits der zeitliche Verlauf der Stromstärke in der Spule gemessen, um Induktivität und ohmschen Widerstand zu überprüfen. Es wurde ein Keramikwiderstand in Reihe mit der zu messenden Helmholtzspule angebracht. Über diesem Widerstand $R$ wurde nun die Spannung $U$ gemessen, indem eine NI USB-6002 Box (im folgenden /DAQ/ für /Data Acquisition/) parallel dazu angeschlossen wurde. Mithilfe des Ohmschen Gesetzes lässt sich so der Strom $I$, der durch den bekannten Widerstand $R$ fließt, berechnen. Da Spule und Widerstand in Reihe geschaltet sind, fließt durch beide die selbe Stromstärke.

#+name: fig-strommessung-aufbau
#+caption: Schematisches Schaltbild zur zeitlich aufgelösten Strommessung am Aufbau.
#+attr_latex: :width 0.7\textwidth :placement [h]
[[file:img/strommessung.pdf]]

Um den zeitlichen Verlauf des Magnetfeldes zu messen, wurde der Messkopf eines Teslameters auf dem Probentisch in den Helmholtzspulen platziert. Das FM210 Teslameter der /Projekt Elektronik GmbH/ besitzt einen BNC-Anschluss, über welchen widerum ein DAQ-Gerät angeschlossen wurde, um den zeitlichen Verlauf des Magnetfeldes aufzuzeichnen.

Die Aufzeichnung der Daten des DAQ-Gerätes erfolgte für beide Messungen mittels eines selbst geschriebenen Python-Scriptes (siehe Anhang [[ref:anh-messung]]).

* TODO Ergebnisse und Diskussion label:sec-ergebnisse
Allgemein kann die Auswertung in zwei Teile unterteilt werden.
Zu Beginn der Auswertung wird in Kapitel ref:sec-b_helmholtz auf Messungen von Stromstärke und Magnetfeldstärke an den im Experiment verwendeten Helmholtzspulen eingegangen. Diese Messungen werden benötigt um das Programm zur Erstellung von Magnetfeldsequenzen zukünftig sinnvoll weiter entwickeln zu können. Es wurden sowohl statische Messungen der Amplitude der Magnetfeldstärke als auch der zeitliche Verlauf der Magnetfeldstärke in Abhängigkeit der Stromstärke durchgeführt.

Anschließend wird Kapitel ref:sec-partikelgeschwindigkeiten der Einfluss der Änderungsrate der trapezförmigen Magnetfeldsequenzen auf die Partikelgeschwindigkeiten näher betrachtet. Hierzu werden außerdem die Auswirkungen auf die Trajektorien der Partikel genauer untersucht und mit simulierten Werten verglichen.

** TODO Strom und Magnetfeld der Helmholtzspulen label:sec-b_helmholtz
Um die verwendeten Helmholtzspulen näher charakterisieren zu können wurden sowohl die Stromstärke als auch das resultierende Magnetfeld gemessen.

Zuerst wurde der Zusammenhang zwischen den Amplituden der Stromstärke $I$ und Magnetfeldstärke $B$ gemessen. Dabei wurde die Stromstärke an einem in Reihe geschalteten Multimeter abgelesen, die Magnetfeldstärke an einem Teslameter der Firma /Projekt Elektronik GmbH/, dessen Messkopf sich in der Probenhalterung der Helmholtzspulen zur Messung des Magnetfeldes in z-Richtung befand. Der Zusammenhang von Stromstärke und Magnetfeldstärke sollte gemäß Gleichung ref:eq-spule linear sein, deswegen wurde in Abbildung ref:fig-magnetfeldstrom eine lineare Regression durch die Messwerte gelegt.

:TABLE:
#+name: Zusammenhang zwischen Magnetfeldstärke und Stromstärke. Hierbei wurde die Spannung an der NI USB-6002 Box erhöht und dazugehörige Stromstärke am Netzteilausgang $I$ und Magnetfeldstärke im inneren der z-Spule $B_\mathrm{z}$ gemessen.
#+attr_latex: :center t :align nil
| $U_\mathrm{DAQ}\nbsp[\si{\volt}]$ | $I\nbsp[\si{\ampere}]$ | $B_\mathrm{z}\nbsp[\si{\milli\tesla}]$ |
|                            / |                  < |                                 < |
|                          0.1 |              0.079 |                              0.73 |
|                          0.2 |              0.158 |                              1.53 |
|                          0.3 |              0.238 |                              2.29 |
|                          0.4 |              0.317 |                              3.15 |
|                          0.5 |              0.396 |                              3.95 |
|                          0.6 |              0.476 |                              4.78 |
|                          0.7 |              0.555 |                              5.59 |
|                          0.8 |              0.635 |                              6.41 |
|                          0.9 |              0.714 |                              7.23 |
|                          1.0 |              0.793 |                              8.05 |
|                          1.1 |              0.873 |                              8.88 |
|                          1.2 |              0.953 |                              9.70 |
|                          1.3 |              1.032 |                             10.52 |
|                          1.4 |              1.111 |                             11.36 |
|                          1.5 |              1.191 |                             12.20 |
|                          1.6 |              1.271 |                             13.01 |
|                          1.7 |               1.35 |                             13.85 |
|                          1.8 |               1.43 |                             14.69 |
|                          1.9 |              1.509 |                             15.52 |
|                          2.0 |              1.588 |                             16.35 |

:END:

:CODE:

#+begin_src python :session magnetfeld :results output :exports none
  import numpy as np
  import pandas as pd
  import matplotlib
  matplotlib.use("Agg")
  import matplotlib.pyplot as plt
  import scipy.stats

  csv = pd.read_csv("B(I).CSV", sep=";", index_col=False)
  plt.clf()
  x=csv['Netzteil [A]'].to_numpy()
  x = np.insert(x, 0, 0)
  xerr = np.full(len(x), 0.001)
  B=csv['Teslameter [mT]'].to_numpy()
  B = np.insert(B, 0, 0)
  Berr = np.full(len(B), 0.01)
  plt.xlabel("$I$ [A]")
  plt.ylabel("$B_\mathrm{z}$ [mT]")
  slope, intercept, r, p, stderr = scipy.stats.linregress(x, B)
  plt.plot(x, slope * x + intercept, 'r--', label="lin. Regression m={:2.2f}, b={:2.2f}, R^2={:2.5f}".format(slope, intercept, r**2))
  # plt.errorbar(x, B, xerr=xerr, yerr=Berr, capsize=3, label="Messwerte")
  plt.plot(x, B, '.', label="Messwerte")
  plt.grid()
  plt.legend()
  plt.savefig("./img/B(I).png", dpi=600)
  "./img/B(I).png"
#+end_src 

#+RESULTS:

:END:

Um die Validität der Näherung für die Magnetfeldstärke von Helmholtzspulen in Abhängigkeit der Stromstärke (Gleichung ref:eq-helmholtz) für die verwendeten Spulen zu überprüfen, wurde die Gleichung nach einigen mathematischen Umformungen als Pythoncode geschrieben und Radius und Windungszahl der verwendeten Spule vorgegeben:

#+caption: Funktion zur Berechnung der Magnetfeldstärke einer Helmholtzspule in Abhängigkeit von der Stromstärke.
#+begin_src python :session magnetfeld :exports code
  def B_helmholtz(I, c):
      n = 330
      r = 0.030
      B = 4*np.pi * 10**(-7) * (8* I * n)/(np.sqrt(125)*r) + c
      return B
#+end_src
#+RESULTS:

Anschließend wurden die vorher gemessenen Stromstärken verwendet um die zu erwartende Magnetfeldstärke zu berechnen. Der Vergleich zwischen gemessenen und berechneten Werten ist in Abbildung ref:fig-b_helmholtz zu sehen.

:CODE:
#+begin_src python :session magnetfeld :results output :export none
  def B_helmholtz(I, c):
      n = 330
      r = 0.030
      B = 4*np.pi * 10**(-7) * (8* I * n)/(np.sqrt(125)*r) + c
      return B
  B_calc = B_helmholtz(x, c=0) * 1000
  plt.clf()
  ax1 = plt.subplot(1,1,1)
  ax1.plot(x, B, label="Messwerte")
  ax1.plot(x, B_calc, label="Berechnete Werte")
  ax1.set_ylabel("$B_\mathrm{z}$ [mT]")
  ax1.set_xlabel("$I$ [A]")
  ax1.legend()
  plt.grid()
  plt.tight_layout()
  plt.savefig("./img/B_calc.png", dpi=600)
  "./img/B_calc.png"
#+end_src

#+RESULTS:

#+begin_src python :session magnetfeld :results output
  m_mess = 4*np.pi * 10**(-7) * (8 * 330)/(np.sqrt(125)*0.030)
  print(m_mess)
#+end_src

#+RESULTS:
: 0.009890939141305344

:END:

\begin{figure}[h]
\begin{subfigure}[t]{0.5\textwidth}
\includegraphics[width=\textwidth]{img/B(I).png}
\caption{Messung der Magnetfeldstärke in z-Richtung $B_\mathrm{z}$ in Abhängigkeit der Stromstärke am Netzteil $I$. Die Messwerte sind blau dargestellt, eine lineare Regression über diese in rot. Fehlerbalken sind aufgrund der Sichtbarkeit des niedrigen Fehlers nicht dargestellt.}
\label{fig-magnetfeldstrom}
\end{subfigure}%
\begin{subfigure}[t]{0.5\textwidth}
\includegraphics[width=\textwidth]{img/b_calc.png}
\caption{Vergleich von gemessener und mit Näherung aus Gleichung ref:eq-helmholtz berechneter Magnetfeldstärke in z-Richtung.}
\label{fig-b_helmholtz}
\end{subfigure}
\end{figure}

Verwendet man Gleichung ref:eq-helmholtz, kann der Proportionalitätsfaktor $m$ der Regression mithilfe von gegebenem Radius $r$ und Windungszahl $N$ berechnet werden:

\begin{equation}
B = \left(\frac{4}{5}\right)^{\frac{3}{2}} \cdot \mu_{\mathrm{0}} \cdot \frac{N}{r} \cdot I = m \cdot I.
\end{equation}

\begin{equation}
m = \left(\frac{4}{5}\right)^{\frac{3}{2}} \cdot \mu_{\mathrm{0}} \cdot \frac{N}{r}
= \left(\frac{4}{5}\right)^{\frac{3}{2}} \cdot 4\pi \cdot 10^{-7}\si{\newton\per\square\ampere} \cdot \frac{330}{\SI{0.03}{m}} = \SI{0.00989}{\tesla\per\ampere}
\end{equation}

Hierbei wird deutlich, dass die Näherung für höhere Stromstärken nicht hinreichend genügt. Jedoch liegen für den verwendeten Aufbau benötigte Magnetfeldstärken im Bereich von unter \SI{8}{\milli\tesla}, weswegen die Näherung in Zukunft im Partikeltransport Programm verwendet werden könnte, um die Amplitude des entstehenden Magnetfeldes bereits im Voraus zu berechnen.

Um den zeitlichen Verlauf der Stromstärke zu bestimmen wurde der Aufbau aus Kapitel ref:sec-stromundmagnet verwendet.

Zuerst wurde der zeitliche Verlauf der Stromstärke bestimmt. Dazu wurden mit dem Programm aus Kapitel ref:sec-py jeweils 10 Sekunden lang eine Rechteckspannung mit zwei verschiedene Amplituden angelegt. Es wurden die Helmholtzspulen für x- und z-Richtung vermessen, da gegenwärtig nur zwei Spulen gleichzeitig verwendet werden. Dies ergibt die in Abbildung ref:fig-stromraw sichtbaren Messreihen.

:CODE:
 
#+begin_src python :session strom :exports none :results output
  import matplotlib
  matplotlib.use("agg")
  import matplotlib.pyplot as plt
  import numpy as np
  import pandas as pd

  file1 = "./Messung/I/x/2mT_square_0.csv"
  file2 = "./Messung/I/x/3mT_square_0.csv"
  file3 = "./Messung/I/z/2mT_square_0.csv"
  file4 = "./Messung/I/z/3mT_square_0.csv"
  B_file1 = "./Messung/B/x/2mT_square_0.csv"
  B_file2 = "./Messung/B/x/3mT_square_0.csv"
  B_file3 = "./Messung/B/z/2mT_square_0.csv"
  B_file4 = "./Messung/B/z/3mT_square_0.csv"


  datalist = [
      pd.read_csv(file1).to_numpy(),
      pd.read_csv(file2).to_numpy(),
      pd.read_csv(file3).to_numpy(),
      pd.read_csv(file4).to_numpy()]
  """
        pd.read_csv(B_file1).to_numpy() * 10,
        pd.read_csv(B_file2).to_numpy() * 10,
        pd.read_csv(B_file3).to_numpy() * 10,
        pd.read_csv(B_file4).to_numpy() * 10]
  """

  # Anfang und Ende abschneiden
  for i, data in enumerate(datalist):
      sr = 48000
      end = np.argmax(data>0.03)
      data = data[end:end+10*sr]
      datalist[i] = data

  fig, ax = plt.subplots(2,2, sharex=True)
  ax[0,0].plot(datalist[0])
  ax[0,1].plot(datalist[2])
  ax[0,0].set_title("x")
  ax[1,0].plot(datalist[1])
  ax[1,1].plot(datalist[3])
  ax[0,1].set_title("z")
  ax[0,0].set_ylabel("$I$ [A]")
  ax[1,0].set_ylabel("$I$ [A]")
  ax[1,0].set_xlabel("Datenpunkte")
  ax[1,1].set_xlabel("Datenpunkte")
  ax[1,1].set_xticks(np.arange(0,500000,step=150000))
  plt.tight_layout()
  plt.savefig("./img/strom.png", dpi=600)
  "./img/strom.png"
#+end_src

#+RESULTS:

:END:

#+name: fig-stromraw
#+caption: Zeitlicher Verlauf der Stromstärke in den Spulen für x- und z-Richtung. Links Messungen unterschiedlicher Amplitude an der x-Spule, rechts Messungen unterschiedlicher Amplitude an der z-Spule.
#+attr_latex: :width \textwidth :placement [H]
[[file:img/strom.png]]
 
Um eine Aussage über die Änderungsrate (Steigung) des Magnetfeldes machen zu können, ist es vorteilhaft das Verhalten für eine einzelne Periode zu betrachten. Dazu wurde der über alle zehn Perioden gemittelt. Diese gemittelten Messwerte sind zu sehen in Abbildung ref:fig-stromavg.

:CODE:

#+begin_src python :session strom :results output
  # in 10 Perioden schneiden:
  n_periods = 10
  avglist = []
  for i, data in enumerate(datalist):
      periodic = data.reshape(n_periods, sr)
      avg = periodic.mean(axis=0)
      avglist.append(avg)
  plt.clf()
  fig, ax = plt.subplots(2,2, sharex=True)
  ax[0,0].set_title("x")
  ax[0,0].set_ylabel("$I$ [A]")
  ax[1,0].set_xlabel("Datenpunkte")
  ax[0,0].plot(avglist[0])
  ax[0,1].plot(avglist[2])
  ax[1,0].plot(avglist[1])
  ax[1,1].plot(avglist[3])
  ax[0,1].set_title("z")
  ax[1,0].set_ylabel("$I$ [A]")
  ax[1,1].set_xlabel("Datenpunkte")
  ax[0,0].set_xticks(np.arange(0,50000,15000))
  plt.tight_layout()
  plt.savefig("./img/strom_avg.png", dpi=600)
  "./img/strom_avg.png"

#+end_src

#+RESULTS:

:END:

#+name: fig-stromavg
#+caption: Über alle zehn Perioden gemittelter zeitlicher Verlauf der Stromstärke für x- und z-Richtung. Links sind jeweils Stromstärkenmessungen für die x-Spule dargestellt, rechts Messungen der z-Spule.
#+attr_latex: :width \textwidth :placement [H]
[[file:img/strom_avg.png]]

Vor allem für die Strommessungen der x-Spule sieht man klar eine Stromspitze zu Beginn der Plateaus. Dies ist wahrscheinlich auf das spannungsgesteuerte Netzteil zurückzuführen, welches einen konstanten Strom erzeugen soll. Jedoch ist durch die Impedanz der Spule bei abrupten Änderungen des Stromes ein hoher Blindwiderstand vorhanden, welcher durch das Netzteil versucht wird zu kompensieren. Dieser Blindwiderstand fällt dann ab, da sich die Stromstärke nicht mehr ändert, und das Netzteil passt den Ausgangsstrom an, um die gewünschte Amplitude zu erreichen.

:CODE:
#+begin_src python :session strom :results file
  plt.clf()
  plt.plot(avglist[3][:500], '.')
  plt.savefig("./img/strom_anfang.png", dpi=600)
  "./img/strom_anfang.png"

#+end_src

#+RESULTS:
[[file:./img/strom_anfang.png]]

:END:


** TODO Partikelgeschwindigkeiten label:sec-partikelgeschwindigkeiten
\blindtext

:CODE:
#+begin_src python :session plateau :results file
  import matplotlib
  matplotlib.use("agg")
  import numpy as np
  import matplotlib.pyplot as plt
  import scipy.signal as signal


  def trapez_signal(x, freq, width=2., slope=1., amp=1., offs=0, phase=0):
      """
      Easier construction of trapezoid_signal
      """
      amp = amp * 2
      offs = -1 * amp / 2
      phase = phase * np.pi / 180
      slope = slope / (2 * np.pi * freq)
      a = slope*width * \
          signal.sawtooth(2*np.pi*x*freq/width + 90*np.pi /
                          180 + phase, width=0.5)/4.
      a[a > amp / 2.] = amp / 2.
      a[a < -amp / 2.] = -amp / 2.
      return a + amp / 2. + offs


  x = np.linspace(0, 2 * np.pi, 10000)
  square = signal.square(x)
  square[0] = 0
  square2 = square * 4
  plat = trapez_signal(x, 1, slope=1, width=x[-1])
  fig, ax = plt.subplots(2, 1)
  ax[0].plot(x, square)
  ax[1].plot(x, plat)
  plt.tight_layout()
  plt.savefig("plateau.png", dpi=100)
  "plateau.png"
#+end_src

#+RESULTS:
[[file:plateau.png]]

:END:

:CODE:
#+begin_src python :session v :exports none :results output
  import numpy as np
  import matplotlib
  matplotlib.use("Agg")
  import matplotlib.pyplot as plt
  from matplotlib import rc
  rc('font',**{'family':'sans-serif','sans-serif':['Helvetica']})
  rc('text', usetex=True)

  t_plateau = [0.25, 0.2, 0.15, 0.1, 0.05, 0]
  v1 = [54.86, 51.09, 51.51, 60.8, 87.9, 130.91] 
  err1 = [0.8, 1.19, 1.97, 0.7, 1.44, 2.62]
  v2 = [65.55, 59.60, 63.13, 75.53, 108.23, 119.98]
  err2 = [1.09, 0.76, 1.07, 1.07, 1.05, 1.34]

  plt.clf()
  fig, ax = plt.subplots(1,1)
  ax.errorbar(t_plateau, v1, yerr=err1, label="B(z) = B(x) = 3.29 mT", capsize=3)
  ax.errorbar(t_plateau, v2, yerr=err2, label="B(z) = 3.29 mT,  B(x) = 1,19 mT", capsize=3)
  ax.legend()
  ax.set_xlabel("Startzeit Plateau [s]")
  ax.set_ylabel("Geschwindigkeit gr. Schritt [mT/s]")
  ax.grid()
  plt.savefig("./img/v.png", dpi=600)
#+end_src

#+RESULTS:

:END: 
  #+caption: Gemessene Partikelgeschwindigkeiten für verschiedene Startzeiten des Plateaus in der angelegten Trapezspannung für eine Frequenz von 1 Hz.
  #+attr_latex: :placement [!h] :width .75\textwidth
  #+name: img-v
  [[file:./img/v.png]]

 #+caption: Darstellung der einzelnen Trajektorien von ausgewählten Partikeln bei verschiedenen Änderungsraten des Magnetfeldes. 
 #+attr_latex: :placmeent [!h] :width 0.7\textwidth
 #+name: img-traj_real
 # file:./img/traj_real.png
 
 #+caption: Simulierte Trajektorien für verschiedene Änderungsraten des Magnetfeldes. 
 #+attr_latex: :placmeent [!h] :width 0.7\textwidth
 #+name: img-traj_real
 # file:./img/traj_sim.png

#+caption: Screenshot der /Video Spot Tracker/ Software nach erfolgreicher Auswertung eines Videos. Gelb markiert sind die Trajektorien der verschiedenen Partikel, blau die Endpunkte der Partikel.
#+attr_latex: :placement [h] :width 0.75\textwidth
#+name: img-videospottracker
file:./img/videospottracker.png
* TODO Zusammenfassung und Ausblick label:sec-zusammenfassung
# Beliebige Magnetfeldsequenzen
# Trigger Camera
* Anhang
** TODO Python-Script zur Messung von Stromstärke und Magnetfeld: label:anh-messung

#+begin_src python :exports code
  """ Measure magnetic fieldstrength with NI USB-6002 """
  import numpy as np
  import nidaqmx
  import matplotlib.pyplot as plt
  import pandas as pd

  ''' You may have to adjust these values '''
  CHANNEL = "Dev1/ai0" # DAQ Device on your PC
  SAMPLE_RATE = 48000 # Depends on the Device
  TIME = 10 # Measurement time in sec
  SAMPS_PER_CHAN = 48000 * TIME 
  CONVERSION_FACTOR = 10 # Depends on the measuring range of the teslameter

  def measure(file):
      """ make a new measurement into a file """
      with nidaqmx.Task() as task:
          task.ai_channels.add_ai_voltage_chan(CHANNEL)
          task.timing.cfg_samp_clk_timing(SAMPLE_RATE,
                                          samps_per_chan=SAMPS_PER_CHAN,
                                          sample_mode=nidaqmx.constants.AcquisitionType.FINITE)
          task.start()
          task.wait_until_done(timeout=1002)
          data = np.asarray(task.read(number_of_samples_per_channel=SAMPS_PER_CHAN))
      df = pd.DataFrame(data)
      df.to_csv(file, index=False)
      return data

  def read_csv(file):
      return pd.read_csv(file)

  if __name__ == "__main__":
      #Uncomment if you want to measure new data
      #data = measure("data_200mt.csv")
      # Uncomment if you want to read a datafile:
      filename = "z_1V_1Hz_200mT_1.csv"
      data = read_csv(filename)['0'].to_numpy()
      #####

      plt.tight_layout()
      plt.plot(data * CONVERSION_FACTOR, 'b')
      plt.show()
#+end_src

#+RESULTS:

* 
  :PROPERTIES:
  :UNNUMBERED: t
  :END:
\printbibliography
  
* Danksagung
:PROPERTIES:
:UNNUMBERED: t
:END:
Danke.
